<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="app_title">MockerMix Beta</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="translations.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        dark: {
                            100: '#1C1C1E',
                            200: '#2C2C2E',
                            300: '#3A3A3C',
                            400: '#48484A',
                        },
                        accent: {
                            primary: '#5E5CE6',
                            green: '#2AC769',
                            red: '#FF453A',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #111111;
            color: #E5E5E7;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif;
        }

        #drop-zone {
            border: 2px dashed rgba(94, 92, 230, 0.6);
            border-radius: 12px;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(94, 92, 230, 0.1);
            color: #5E5CE6;
            transition: all 0.2s ease;
            margin-bottom: 1rem;
        }

        #drop-zone:hover {
            border-color: rgba(94, 92, 230, 0.9);
            background-color: rgba(94, 92, 230, 0.15);
        }

        #playlist-container {
            height: calc(100vh - 380px);
            min-height: 200px;
            margin-top: 1rem;
        }

        #playlist {
            list-style: none;
            padding: 0;
            height: 100%;
            overflow-y: auto;
        }

        #playlist li {
            padding: 12px 16px;
            margin: 8px 0;
            cursor: pointer;
            border-radius: 8px;
            background-color: #2C2C2E;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }

        #playlist li:hover {
            background-color: #3A3A3C;
        }

        #playlist li.playing {
            background-color: rgba(94, 92, 230, 0.2);
            border-left: 4px solid #5E5CE6;
        }

        .slider-container {
            position: relative;
            margin: 24px 0;
        }

        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #3A3A3C;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #5E5CE6;
            cursor: pointer;
        }

        input[type="number"] {
            background-color: #2C2C2E;
            border: 1px solid #3A3A3C;
            color: #E5E5E7;
            padding: 0 0 0 8px; /* 只保留左侧内部间距，让按钮紧贴右侧 */
            /* 自定义输入框调节按钮的暗色配色 */
            &::-webkit-inner-spin-button,
            &::-webkit-outer-spin-button {
                background-color: #3A3A3C;
                opacity: 0; /* 默认隐藏调节按钮 */
                filter: invert(0.7);
                margin-left: 0; /* 让按钮紧贴输入框右侧 */
            }

            /* 鼠标悬停时显示调节按钮 */
            &:hover::-webkit-inner-spin-button,
            &:hover::-webkit-outer-spin-button {
                opacity: 1; /* 鼠标悬停时显示调节按钮 */
            }
        }

        input[type="checkbox"] {
            accent-color: #5E5CE6;
            width: 18px;
            height: 18px;
            background-color: #3A3A3C; /* 未勾选状态的背景色 */
            border: 1px solid #48484A; /* 未勾选状态的边框 */
        }

        /* 自定义下拉框样式 */
        select {
            appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="%235E5CE6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>');
            background-repeat: no-repeat;
            background-position: right 12px center; /* 增加右侧箭头和边缘的距离 */
            padding-right: 40px; /* 确保文字与箭头之间有足够空间 */
        }

        /* 自定义下拉菜单选项样式 */
        select option {
            background-color: #2C2C2E;
            color: #E5E5E7;
            padding: 12px; /* 增加选项之间的间距 */
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.2s ease;
            outline: none;
            border: none;
        }

        .btn-primary {
            background-color: #5E5CE6;
            color: white;
        }

        .btn-primary:hover {
            background-color: #4c4adb;
        }

        .btn-danger {
            background-color: #FF453A;
            color: white;
        }

        .btn-danger:hover {
            background-color: #e53c31;
        }

        .audio-controls {
            margin-top: 32px;
            background-color: #2C2C2E;
            padding: 16px;
            border-radius: 12px;
            display: none; /* 隐藏整个音频控制区域 */
        }

        #audio-player {
            width: 100%;
            margin-top: 8px;
            height: 0; /* 高度设为0 */
            opacity: 0; /* 透明度设为0 */
            position: absolute; /* 绝对定位，不占用空间 */
            pointer-events: none; /* 禁用鼠标交互，但保留功能 */
        }


        .main-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            height: calc(100vh - 250px);
            min-height: 500px;
            margin-bottom: 2rem;
        }

        .left-panel, .right-panel {
            display: flex;
            flex-direction: column;
        }

        .panel-top {
            flex: 0 0 auto;
        }

        .panel-bottom {
            flex: 1 1 auto;
            margin-top: 1rem;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* 确保左右两侧上下面板间距相同 */
        .left-panel .panel-top {
            margin-bottom: 1rem;
        }

        .left-panel .panel-bottom {
            margin-top: 0;
        }

        #empty-list {
            display: none;
        }

        .delete-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            color: rgba(94, 92, 230, 0.9);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .delete-btn:hover {
            color: rgba(94, 92, 230, 1);
        }

        /* 自定义滚动条样式 - 暗色系 */
        #playlist::-webkit-scrollbar {
            width: 8px;
        }

        #playlist::-webkit-scrollbar-track {
            background: #1C1C1E;
            border-radius: 4px;
        }

        #playlist::-webkit-scrollbar-thumb {
            background: #3A3A3C;
            border-radius: 4px;
        }

        #playlist::-webkit-scrollbar-thumb:hover {
            background: #48484A;
        }

        /* 增加滚动条与列表内容的间距 */
        #playlist {
            padding-right: 12px;
        }
    </style>
</head>
<body class="px-4 py-6 md:px-8 lg:px-12 xl:px-16 max-w-7xl mx-auto">

<header class="mb-6">
    <div class="flex justify-between items-center mb-3">
        <div></div>
        <div class="language-selector flex items-center">
            <!-- 使用语言图标替代文字标签 -->
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129" />
            </svg>
            <!-- 设置固定宽度 -->
            <select id="language-select" class="bg-dark-300 text-white py-1 px-2 rounded border border-dark-400 focus:outline-none focus:border-accent-primary w-24">
                <option value="zh">中文</option>
                <option value="en">English</option>
                <option value="ja">日本語</option>
            </select>
        </div>
    </div>
    <h1 class="text-3xl font-bold text-center text-white">MockerMix</h1>
    <p class="text-center text-gray-400 mt-2" data-i18n="app_description">拖放音频文件并创建混音效果</p>
</header>

<main class="main-container">
    <!-- 左侧面板 -->
    <div class="left-panel">
        <!-- 左上：拖拽区域 -->
        <div class="panel-top">
            <div id="drop-zone" class="flex flex-col items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                </svg>
                <p data-i18n="drop_zone">拖拽音频文件到这里</p>
            </div>
        </div>

        <!-- 左下：播放列表 -->
        <div class="panel-bottom bg-dark-200 rounded-lg p-6">
            <h2 class="text-xl font-medium mb-4 text-white" data-i18n="playlist_title">播放列表</h2>
            <div id="playlist-container">
                <ul id="playlist" class="overflow-y-auto"></ul>
                <p id="empty-list" class="text-gray-500 text-center py-4" data-i18n="empty_list">暂无音频文件</p>
            </div>
        </div>
    </div>

    <!-- 右侧面板 -->
    <div class="right-panel">
        <!-- 右上：控制面板 -->
        <div class="panel-top bg-dark-200 rounded-lg p-6">
            <h2 class="text-xl font-medium mb-4 text-white" data-i18n="control_panel">控制面板</h2>

            <div class="flex flex-wrap items-center gap-6 mb-6">
                <button id="start" class="btn btn-primary flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                    </svg>
                    <span data-i18n="start_random">开始随机播放</span>
                </button>

                <button id="stop" class="btn btn-danger hidden flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z" clip-rule="evenodd" />
                    </svg>
                    <span data-i18n="stop_play">���止播放</span>
                </button>

                <div class="flex items-center">
                    <label for="mix-count" class="text-gray-300 mr-3" data-i18n="mix_count">混音数量:</label>
                    <input type="number" id="mix-count" min="0" max="6" value="0" class="w-16 px-3 py-2 rounded">
                    <span class="ml-3 text-sm text-gray-500" data-i18n="mix_count_desc">(0=不混音，最大6个)</span>
                </div>
            </div>

            <div class="slider-container mt-6">
                <div class="flex justify-between mb-2">
                    <label for="master-volume" class="text-gray-300" data-i18n="master_volume">总音量</label>
                    <span id="master-volume-display" class="text-accent-primary">100%</span>
                </div>
                <input type="range" id="master-volume" min="0" max="100" value="100" class="w-full">
                <div class="flex justify-between text-xs text-gray-500">
                    <span>0%</span>
                    <span>100%</span>
                </div>
            </div>

            <div class="audio-controls">
                <audio id="audio-player" controls></audio>
            </div>
        </div>

        <!-- 右下：播放设置 -->
        <div class="panel-bottom bg-dark-200 rounded-lg p-6">
            <h2 class="text-xl font-medium mb-4 text-white" data-i18n="play_settings">播放设置</h2>

            <div class="slider-container">
                <div class="flex justify-between mb-2">
                    <label for="base-interval" class="text-gray-300" data-i18n="base_interval">基本间隔时间</label>
                    <span id="base-interval-display" class="text-accent-primary">1.0<span data-i18n="seconds">秒</span></span>
                </div>
                <input type="range" id="base-interval" min="100" max="4000" value="1000" class="w-full">
                <div class="flex justify-between text-xs text-gray-500">
                    <span>0.1s</span>
                    <span>4s</span>
                </div>
            </div>

            <div class="slider-container">
                <div class="flex justify-between mb-2">
                    <label for="offset" class="text-gray-300" data-i18n="offset_percentage">随机偏移百分比</label>
                    <span id="offset-display" class="text-accent-primary">20%</span>
                </div>
                <input type="range" id="offset" min="0" max="100" value="20" class="w-full">
                <div class="flex justify-between text-xs text-gray-500">
                    <span>0%</span>
                    <span>100%</span>
                </div>
            </div>

            <div class="mt-6 flex items-center">
                <input type="checkbox" id="prevent-repeat" class="mr-3">
                <label for="prevent-repeat" class="text-gray-300" data-i18n="prevent_repeat">防止重复播放同一音频</label>
            </div>

            <div class="mt-6">
                <label for="trigger-mode" class="text-gray-300 block mb-2" data-i18n="trigger_mode">触发方式</label>
                <select id="trigger-mode" class="bg-dark-300 text-white py-2 px-3 rounded w-full border border-dark-400 focus:outline-none focus:border-accent-primary">
                    <option value="timer" selected data-i18n="trigger_mode_timer">当触发器触发时</option>
                    <option value="ended" data-i18n="trigger_mode_ended">当音频播放完成时</option>
                </select>
            </div>
        </div>
    </div>
</main>

<!-- 大幅增加底部留白空间 -->
<div class="py-24"></div>

<!-- 引用外部JavaScript文件 -->
<script src="index.js"></script>
</body>
</html>
