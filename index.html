<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>音频混音器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        dark: {
                            100: '#1C1C1E',
                            200: '#2C2C2E',
                            300: '#3A3A3C',
                            400: '#48484A',
                        },
                        accent: {
                            primary: '#5E5CE6',
                            green: '#2AC769',
                            red: '#FF453A',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #111111;
            color: #E5E5E7;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif;
        }

        #drop-zone {
            border: 2px dashed rgba(94, 92, 230, 0.6);
            border-radius: 12px;
            height: 160px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 24px;
            background-color: rgba(94, 92, 230, 0.1);
            color: #5E5CE6;
            transition: all 0.2s ease;
        }

        #drop-zone:hover {
            border-color: rgba(94, 92, 230, 0.9);
            background-color: rgba(94, 92, 230, 0.15);
        }

        #playlist {
            list-style: none;
            padding: 0;
            overflow-y: auto;
            height: 100%;
        }

        .playlist-container {
            display: flex;
            flex-direction: column;
            background-color: #2C2C2E;
            border-radius: 12px;
            padding: 16px;
            height: 100%;
        }

        #playlist li {
            padding: 12px 16px;
            margin: 8px 0;
            cursor: pointer;
            border-radius: 8px;
            background-color: #3A3A3C;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }

        #playlist li:hover {
            background-color: #48484A;
        }

        #playlist li.playing {
            background-color: rgba(94, 92, 230, 0.2);
            border-left: 4px solid #5E5CE6;
        }

        .slider-container {
            position: relative;
            margin: 24px 0;
        }

        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #3A3A3C;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #5E5CE6;
            cursor: pointer;
        }

        input[type="number"] {
            background-color: #2C2C2E;
            border: 1px solid #3A3A3C;
            color: #E5E5E7;
        }

        input[type="checkbox"] {
            accent-color: #5E5CE6;
            width: 18px;
            height: 18px;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.2s ease;
            outline: none;
            border: none;
        }

        .btn-primary {
            background-color: #5E5CE6;
            color: white;
        }

        .btn-primary:hover {
            background-color: #4c4adb;
        }

        .btn-danger {
            background-color: #FF453A;
            color: white;
        }

        .btn-danger:hover {
            background-color: #e53c31;
        }

        .audio-controls {
            margin-top: 32px;
            background-color: #2C2C2E;
            padding: 16px;
            border-radius: 12px;
            display: none; /* 隐藏整个音频控制区域 */
        }

        #audio-player {
            width: 100%;
            margin-top: 8px;
            height: 0; /* 高度设为0 */
            opacity: 0; /* 透明度设为0 */
            position: absolute; /* 绝对定位，不占用空间 */
            pointer-events: none; /* 禁用鼠标交互，但保留功能 */
        }

        /* 美化音频播放器 */
        audio::-webkit-media-controls-panel {
            background-color: #3A3A3C;
        }

        .scrollbox {
            overflow-y: auto;
            flex-grow: 1;
        }

        .scrollbox::-webkit-scrollbar {
            width: 8px;
        }

        .scrollbox::-webkit-scrollbar-track {
            background: #2C2C2E;
            border-radius: 4px;
        }

        .scrollbox::-webkit-scrollbar-thumb {
            background-color: #48484A;
            border-radius: 4px;
        }

        .scrollbox::-webkit-scrollbar-thumb:hover {
            background-color: #5E5CE6;
        }
    </style>
</head>
<body class="px-4 py-8 md:px-8 lg:px-16 xl:px-32 max-w-7xl mx-auto">

<header class="mb-8">
    <h1 class="text-3xl font-bold text-center text-white">音频混音器</h1>
    <p class="text-center text-gray-400 mt-2">拖放音频文件并创建混音效果</p>
</header>

<main class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- 左侧区域：拖拽区域和播放列表 -->
    <div class="flex flex-col h-full">
        <!-- 拖拽区域 -->
        <div id="drop-zone" class="flex flex-col items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
            </svg>
            <p>拖拽音频文件到这里</p>
        </div>

        <!-- 播放列表 -->
        <div class="playlist-container flex-grow">
            <h2 class="text-xl font-medium mb-4 text-white">播放列表</h2>
            <div class="scrollbox">
                <ul id="playlist"></ul>
                <p id="empty-list" class="text-gray-500 text-center py-4">暂无音频文件</p>
            </div>
        </div>
    </div>

    <!-- 右侧区域：播放设置和控制面板 -->
    <div class="flex flex-col h-full">
        <!-- 播放设置 -->
        <div class="bg-dark-200 rounded-lg p-6 mb-6">
            <h2 class="text-xl font-medium mb-4 text-white">播放设置</h2>

            <div class="slider-container">
                <div class="flex justify-between mb-2">
                    <label for="base-interval" class="text-gray-300">基本间隔时间</label>
                    <span id="base-interval-display" class="text-accent-primary">1.0秒</span>
                </div>
                <input type="range" id="base-interval" min="100" max="4000" value="1000" class="w-full">
                <div class="flex justify-between text-xs text-gray-500">
                    <span>0.1s</span>
                    <span>4s</span>
                </div>
            </div>

            <div class="slider-container">
                <div class="flex justify-between mb-2">
                    <label for="offset" class="text-gray-300">随机偏移百分比</label>
                    <span id="offset-display" class="text-accent-primary">20%</span>
                </div>
                <input type="range" id="offset" min="0" max="100" value="20" class="w-full">
                <div class="flex justify-between text-xs text-gray-500">
                    <span>0%</span>
                    <span>100%</span>
                </div>
            </div>

            <div class="mt-6 flex items-center">
                <input type="checkbox" id="prevent-repeat" class="mr-3">
                <label for="prevent-repeat" class="text-gray-300">防止重复播放同一音频</label>
            </div>
        </div>

        <!-- 控制面板 -->
        <div class="bg-dark-200 rounded-lg p-6 flex-grow">
            <h2 class="text-xl font-medium mb-4 text-white">控制面板</h2>

            <div class="flex flex-wrap items-center gap-6 mb-6">
                <button id="start" class="btn btn-primary flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                    </svg>
                    开始随机播放
                </button>

                <button id="stop" class="btn btn-danger hidden flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z" clip-rule="evenodd" />
                    </svg>
                    停止播放
                </button>

                <div class="flex items-center">
                    <label for="mix-count" class="text-gray-300 mr-3">混音数量:</label>
                    <input type="number" id="mix-count" min="0" max="6" value="0" class="w-16 px-3 py-2 rounded">
                    <span class="ml-3 text-sm text-gray-500">(0=不混音，最大6个)</span>
                </div>
            </div>

            <div class="audio-controls">
                <audio id="audio-player" controls></audio>
            </div>
        </div>
    </div>
</main>

<footer class="mt-10 text-center text-gray-500 text-sm">
    <p>音频混音器 &copy; 2025</p>
</footer>

<!-- 引用外部JavaScript文件 -->
<script src="index.js"></script>
</body>
</html>
